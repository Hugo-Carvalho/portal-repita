<!DOCTYPE html>
<html lang="pt" xmlns="http://www.w3.org/1999/xhtml"
	xmlns:th="http://www.thymeleaf.org"
	xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
	layout:decorate="~{layout/LayoutPadrao}">

<head>
	<title>Notas não aprovadas</title>
</head>

<body>
	<section layout:fragment="conteudo">
		<div class="page-header">
			<div class="container-fluid">
				<h1>Notas não aprovadas - Atribuídas</h1>
			</div>
		</div>
		<div class="container-fluid">
				<div class="pull-left">
					<div th:switch="${tipoUsuario}"> 
						<div th:case="admin">
							<div th:if="${mostrar}">
								<a href="/allNotasNaoAprovadasAtribuidas" type="button" class="btn">Mostrar todas as notas atribuidas</a>
							</div>
						</div>
					</div>
				</div>
				<div class="pull-right">
					<label>Recarregar: </label>
					<select id="reloader" class="form-group" onchange="reloader(this.value);">
						<option value="desl." text="desl.">desl.</option>
						<option value="10000" text="10 seg">10 seg</option>
						<option value="20000" text="20 seg">20 seg</option>
						<option value="40000" text="40 seg">40 seg</option>
						<option value="60000" text="1 min">1 min</option>
						<option value="180000" text="3 min">3 min</option>
					</select>
				</div>
			<table class="table table-hover">
				<thead class="thead-dark">
					<tr th:switch="${tipoUsuario}">
						<th class="text-center">#</th>
						<th class="text-center">Numero do chamado</th>
						<th class="text-center">Contrato</th>
						<th class="text-center" th:case="admin">Atribuído para</th>
						<th class="text-center">Editar</th>
						<th class="text-center">Aprovar</th>
						<th class="text-center" th:case="admin">Excluir</th>
					</tr>
				</thead>
				<tbody class="text-center">
					<tr th:switch="${tipoUsuario}" th:each="allNotaNaoAprovAndAtrib : ${allNotaNaoAprovAndAtrib}">
						<td><span th:text="${allNotaNaoAprovAndAtrib.id}"></span></td>
						<td><span th:text="${allNotaNaoAprovAndAtrib.numChamado}"></span></td>
						<td><span th:text="${allNotaNaoAprovAndAtrib.contrato}"></span></td>
						<td th:case="admin"><span th:text="${allNotaNaoAprovAndAtrib.atribuidoPara}"></span></td>
						<td><a class="waves-effect waves-light btn-small" th:href="@{/editarNota(id = ${allNotaNaoAprovAndAtrib.id}, pageAnt = @{notasNaoAprovadasAtribuidas})}"><i class="material-icons left"><span class="glyphicon glyphicon-edit text-warning"></span></i></a></td>
						<td><a class="waves-effect waves-light btn-small" th:href="${(#mvc.url('NNAC#aprovarNota').arg(0, allNotaNaoAprovAndAtrib.id)).build()}"><i class="material-icons left"><span class="glyphicon glyphicon-check text-success"></span></i></a></td>
						<td th:case="admin"><a class="waves-effect waves-light btn-small" th:href="${(#mvc.url('NNAC#excluirNota').arg(0, allNotaNaoAprovAndAtrib.id)).build()}"><i class="material-icons left"><span class="glyphicon glyphicon-trash text-danger"></span></i></a></td>
					</tr>
				</tbody>
			</table>
		</div>
		<script>
			var time = localStorage.getItem('time');
			if(time != null){
        		document.getElementById("reloader").value = time;
			} else {
				document.getElementById("reloader").value = 'desl.';
			}
			function reloader(time){
				localStorage.setItem('time', time);
				location.reload();
			}

			time = document.getElementById("reloader").value;

			if(time != "desl."){
				setTimeout(function(){ 
					localStorage.setItem('time', time);
					location.reload();
				}, time);
			}
		</script>
	</section>
</body>
</html>